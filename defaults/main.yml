---
##########################
# versions

openstack_version: pike

##########################
# fluentd

fluentd_port: 5140
fluentd_host: 127.0.0.1

##########################
# packages

required_packages_common:
  - ethtool
  - python-pip
  - rsyslog
  - selinux-utils
  - ssh

cleanup_packages_common:
  - apport
  - apport-symptoms
  - libvirt-bin
  - lxc
  - lxd
  - open-iscsi
  - python3-apport
  - ubuntu-server

install_microcode_package_common: no

##########################
# cockpit

configure_cockpit: no
required_packages_cockpit:
  - cockpit-bridge
  - cockpit-docker
  - cockpit-networkmanager
  - cockpit-packagekit
  - cockpit-storaged
  - cockpit-system

##########################
# services

required_services_common:
  - cron

cleanup_services_common: []

##########################
# modules

kernel_modules_common:
  - bonding
  - 8021q
  - configfs

##########################
# sysctl

sysctl_common:
  elasticsearch:
    # https://github.com/docker-library/elasticsearch/issues/98
    - name: vm.max_map_count
      value: 262144
  rabbitmq:
    - name: net.ipv4.tcp_keepalive_time
      value: 6
    - name: net.ipv4.tcp_keepalive_intvl
      value: 3
    - name: net.ipv4.tcp_keepalive_probes
      value: 3
    - name: net.core.wmem_max
      value: 16777216
    - name: net.core.rmem_max
      value: 16777216
    - name: net.ipv4.tcp_fin_timeout
      value: 20
    - name: net.ipv4.tcp_tw_reuse
      value: 1
    - name: net.core.somaxconn
      value: 4096
    - name: net.ipv4.tcp_syncookies
      value: 0
    - name: net.ipv4.tcp_max_syn_backlog
      value: 8192
  all:
    - name: vm.swappiness
      value: 1

##########################
# other

systohc_common: yes
