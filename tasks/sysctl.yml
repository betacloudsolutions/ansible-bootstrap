# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
---
# https://github.com/docker-library/elasticsearch/issues/98
- name: set vm.max_map_count on elasticsearch nodes
  sysctl:
    name: vm.max_map_count
    value: 262144
    sysctl_set: yes
  when: "'elasticsearch' in group_names"
  become: true

# RabbitMQ tuning parameters

# net.ipv4.tcp_keepalive_time: 6
# net.ipv4.tcp_keepalive_intvl: 3
# net.ipv4.tcp_keepalive_probes: 3
# net.core.wmem_max: 16777216
# net.core.rmem_max: 16777216
# net.ipv4.tcp_fin_timeout: 20
# net.ipv4.tcp_tw_reuse: 1
# net.core.somaxconn: 4096
# net.ipv4.tcp_syncookies: 0
# net.ipv4.tcp_max_syn_backlog: 8192
