# This file is subject to the terms and conditions defined in file 'LICENSE',
# which is part of this repository.
---
driver:
  name: openstack
openstack:
  keyfile: /ssh/id_rsa
  instances:
    - name: molecule-betacloud-bootstrap-ubuntu
      image: 'Ubuntu 16.04'
      flavor: vps-ssd-1
      sshuser: ubuntu
      ssh_timeout: 120
      ansible_groups:
        - elasticsearch
        - iscsid
        - molecule
        - rabbitmq
        - ubuntu
      security_groups:
        - ssh
    - name: molecule-betacloud-bootstrap-centos
      image: 'Centos 7'
      flavor: vps-ssd-1
      sshuser: centos
      ssh_timeout: 120
      ansible_groups:
        - centos
        - elasticsearch
        - iscsid
        - molecule
        - rabbitmq
      security_groups:
        - ssh
ansible:
  playbook: playbook.yml
  timeout: 120
  host_vars:
    molecule-betacloud-bootstrap-ubuntu:
      - internal_address: 192.168.10.10
    molecule-betacloud-bootstrap-centos:
      - internal_address: 192.168.10.20
  group_vars:
    centos:
      - operator_user: centos
    molecule:
      - operator_password: $6$8w7/5t2r37WS$61H9A/0I68kgvEjTthmQzOOj3Yu2mKlhd8ehudSmqi4QHiKXvh5qtXPiYhKhVUdUI2MvlL8VAOhVDksB.gGZD0
    ubuntu:
      - operator_user: ubuntu
verifier:
  name: testinfra
molecule:
  ignore_paths:
    - .git
    - .molecule
    - .tox
  test:
    sequence:
      - destroy
      - create
      - converge
      - verify
      - destroy
